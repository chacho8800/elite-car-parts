{% extends "base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/parts/part-index.css' %}">
<title>Parts</title>
{% endblock %}

{% block content %}
<div>
  <h2>
    {% if filter_type %}
      {{ filter_type }}: {{ filter_value|title }}
    {% else %}
      Auto Parts Catalog
    {% endif %}
  </h2>
</div>
<div class="parts-page">
  <div class="sidebar">
    <h3>Parts by Category</h3>
    <table class="parts-table">
      <thead>
        <tr>
          <th>Make</th>
          <th>Model</th>
        </tr>
      </thead>
      <tbody>
        {% for part in parts %}
        <tr>
          <td>
            <a href="{% url 'parts-by-make' part.car.make %}">
              {{ part.car.make }}
            </a>
          </td>
          <td>
            <a href="{% url 'parts-by-model' part.car.model %}">
              {{ part.car.model }}
            </a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

<h3>Filter by Price</h3>
<form method="get" class="price-filter-form" action="{% url 'parts-by-price' %}">
  <div>
    <label for="minPrice">Min Price:</label>
    <input type="number" id="minPrice" name="min_price" placeholder="min" value="{{ request.GET.min_price }}">
  </div>
  <div>
    <label for="maxPrice">Max Price:</label>
    <input type="number" id="maxPrice" name="max_price" placeholder="max" value="{{ request.GET.max_price }}">
  </div>
  <button type="submit" class="apply-btn">Apply</button>
</form>
  </div>
  
  <div class="parts-list">
    {% for part in parts %}
    <div class="part-card">
      {% if part.img %}
      <a href="{% url 'part-detail' part.id %}">
        <img src="{{ part.img.url }}" alt="{{ part.name }}">
      </a>
      {% endif %}
      <h2>{{ part.name }}</h2>
      <p><strong>Price:</strong> ${{ part.price }}</p>
    </div>
    {% empty %}
    <p>No parts found.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}